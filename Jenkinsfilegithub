pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                echo "Build the code using Maven"
                }
        }

        stage('Unit and Integration Test') {
            steps {
                echo "Run unit tests using Junit"
                }
                post{
                    success{
                        mail to: "kaiiyang52@gmail.com",
                        subject: "Build Status Email",
                        body: "Build was successful"
                    }
                }
        }
        stage('Code Analysis') {
            steps {
                echo "Analyze the code using SonarQube"
                }
        }
        stage('Security Scan') {
            steps {
                echo "Perform a security scan using OWASP"
                }
        }
        stage('Deploy to Staging') {
            steps {
                echo "Deploy to staging using AWS"
                }
        }
        stage('Integration test on staging') {
            steps {
                echo "Run integration tests on staging environment"
                }
        }
        stage('Deploy to production') {
            steps {
                echo "Deploy the application to the production environment"
                }
        }
    }
}
